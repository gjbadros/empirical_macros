#!/uns/bin/zsh
awk '/^CATEGORIES_NI:/ { \
cNull = $16; sNull += cNull; \
cLit = $4 + $11 + $17; sLit += cLit; \
cExp = $6 + $7 + $8 + $12; sExp += cExp; \
cStm = $18; sStm += cStm; \
cStrPast = $19 + $21; sStrPast += cStrPast; \
cSyntax = $5 + $10 + $13 + $14 + $20; sSyntax += cSyntax; \
cFail = $2 + $3 + $9 + $15 + $22; sFail += cFail; \
print FILENAME, cNull, cLit, cExp, cStm, cStrPast, cSyntax, cFail \
} \
BEGIN { \
OFS=" & "; \
ORS="\\\\\\hline\n"; \
print "\\begin{tabular}{|l|c|c|c|c|c|c|c|}\\hline\n" "Package", "Null define", "Literal", "Expression", "Statement", "Stringization and pasting", "Other syntatic macros", "Failed classification" } \
END { \
print "\\hline\nTotal", sNull, sLit, sExp, sStm, sStrPast, sSyntax, sFail; \
ORS="";
print "\\end{tabular}" } ' \
"$@" | sed 's/.stat / /'
